# Git Commit ì·¨ì†Œ ê°€ì´ë“œ

## ğŸ“Œ ìƒí™©ë³„ Commit ì·¨ì†Œ ë°©ë²•

Gitì—ì„œ commitì„ ì·¨ì†Œí•˜ëŠ” ë°©ë²•ì€ ìƒí™©ì— ë”°ë¼ ë‹¤ë¦…ë‹ˆë‹¤. ì›í•˜ëŠ” ê²°ê³¼ì— ë§ëŠ” ë°©ë²•ì„ ì„ íƒí•˜ì„¸ìš”.

---

## ğŸ”„ ë°©ë²• 1: Reset ì‚¬ìš© (ë¡œì»¬ ì»¤ë°‹ ì·¨ì†Œ)

### 1-1. ì»¤ë°‹ë§Œ ì·¨ì†Œí•˜ê³  ë³€ê²½ì‚¬í•­ì€ ìœ ì§€ (Staged ìƒíƒœ)

**ì–¸ì œ ì‚¬ìš©:**
- ì»¤ë°‹ ë©”ì‹œì§€ë¥¼ ìˆ˜ì •í•˜ê³  ì‹¶ì„ ë•Œ
- ë³€ê²½ì‚¬í•­ì€ ê·¸ëŒ€ë¡œ ë‘ê³  ì»¤ë°‹ë§Œ ì·¨ì†Œí•˜ê³  ì‹¶ì„ ë•Œ

**ëª…ë ¹ì–´:**
```bash
git reset --soft HEAD~1
```

**ê²°ê³¼:**
- ì»¤ë°‹ì€ ì·¨ì†Œë¨
- ë³€ê²½ì‚¬í•­ì€ staged ìƒíƒœë¡œ ìœ ì§€ë¨ (git add ëœ ìƒíƒœ)
- ë°”ë¡œ ë‹¤ì‹œ ì»¤ë°‹ ê°€ëŠ¥

**ì˜ˆì‹œ:**
```bash
# í˜„ì¬ ìƒíƒœ
git log --oneline -3
# 2461d94 test ì‹œë‚˜ë¦¬ì˜¤
# dd16fd5 Merge branch 'main'
# 2a8bbc3 ë‚´êº¼

# ìµœê·¼ ì»¤ë°‹ ì·¨ì†Œ (ë³€ê²½ì‚¬í•­ ìœ ì§€)
git reset --soft HEAD~1

# ê²°ê³¼ í™•ì¸
git status
# Changes to be committed: (ë³€ê²½ì‚¬í•­ì´ staged ìƒíƒœë¡œ ë‚¨ì•„ìˆìŒ)

git log --oneline -3
# dd16fd5 Merge branch 'main'  (ìµœê·¼ ì»¤ë°‹ì´ ì‚¬ë¼ì§)
# 2a8bbc3 ë‚´êº¼
```

---

### 1-2. ì»¤ë°‹ ì·¨ì†Œí•˜ê³  ë³€ê²½ì‚¬í•­ì€ Unstaged ìƒíƒœë¡œ ìœ ì§€ (ê¸°ë³¸)

**ì–¸ì œ ì‚¬ìš©:**
- ì»¤ë°‹ì„ ì·¨ì†Œí•˜ê³  ë³€ê²½ì‚¬í•­ì„ ë‹¤ì‹œ ê²€í† í•˜ê³  ì‹¶ì„ ë•Œ
- ì¼ë¶€ íŒŒì¼ë§Œ ë‹¤ì‹œ ì»¤ë°‹í•˜ê³  ì‹¶ì„ ë•Œ

**ëª…ë ¹ì–´:**
```bash
git reset HEAD~1
# ë˜ëŠ”
git reset --mixed HEAD~1
```

**ê²°ê³¼:**
- ì»¤ë°‹ì€ ì·¨ì†Œë¨
- ë³€ê²½ì‚¬í•­ì€ unstaged ìƒíƒœë¡œ ìœ ì§€ë¨ (git add ì•ˆ ëœ ìƒíƒœ)
- íŒŒì¼ì€ ìˆ˜ì •ëœ ìƒíƒœë¡œ ë‚¨ì•„ìˆìŒ

**ì˜ˆì‹œ:**
```bash
# ìµœê·¼ ì»¤ë°‹ ì·¨ì†Œ (ë³€ê²½ì‚¬í•­ unstaged)
git reset HEAD~1

# ê²°ê³¼ í™•ì¸
git status
# Changes not staged for commit: (ë³€ê²½ì‚¬í•­ì´ unstaged ìƒíƒœ)

# ì›í•˜ëŠ” íŒŒì¼ë§Œ ë‹¤ì‹œ ìŠ¤í…Œì´ì§•
git add README.md
git commit -m "ìˆ˜ì •ëœ ì»¤ë°‹ ë©”ì‹œì§€"
```

---

### 1-3. ì»¤ë°‹ ì·¨ì†Œí•˜ê³  ë³€ê²½ì‚¬í•­ ì™„ì „íˆ ì‚­ì œ (ì£¼ì˜!)

**ì–¸ì œ ì‚¬ìš©:**
- ì»¤ë°‹ê³¼ ë³€ê²½ì‚¬í•­ì„ ì™„ì „íˆ ë²„ë¦¬ê³  ì‹¶ì„ ë•Œ
- ì‹¤ìˆ˜ë¡œ ì»¤ë°‹í•œ ê²ƒì„ ì™„ì „íˆ ì§€ìš°ê³  ì‹¶ì„ ë•Œ

**âš ï¸ ì£¼ì˜: ë³µêµ¬ ë¶ˆê°€ëŠ¥í•  ìˆ˜ ìˆìŒ!**

**ëª…ë ¹ì–´:**
```bash
git reset --hard HEAD~1
```

**ê²°ê³¼:**
- ì»¤ë°‹ì€ ì·¨ì†Œë¨
- ë³€ê²½ì‚¬í•­ë„ ì™„ì „íˆ ì‚­ì œë¨
- íŒŒì¼ì´ ì´ì „ ì»¤ë°‹ ìƒíƒœë¡œ ëŒì•„ê°

**ì˜ˆì‹œ:**
```bash
# ìµœê·¼ ì»¤ë°‹ ì™„ì „íˆ ì‚­ì œ
git reset --hard HEAD~1

# ê²°ê³¼ í™•ì¸
git status
# working tree clean (ëª¨ë“  ë³€ê²½ì‚¬í•­ ì‚¬ë¼ì§)

git log --oneline -3
# ìµœê·¼ ì»¤ë°‹ì´ ì™„ì „íˆ ì‚¬ë¼ì§
```

---

## ğŸ”™ ë°©ë²• 2: ì—¬ëŸ¬ ì»¤ë°‹ ì·¨ì†Œ

### 2-1. Nê°œ ì»¤ë°‹ ì·¨ì†Œ

**ëª…ë ¹ì–´:**
```bash
# ìµœê·¼ 3ê°œ ì»¤ë°‹ ì·¨ì†Œ (ë³€ê²½ì‚¬í•­ ìœ ì§€)
git reset --soft HEAD~3

# ìµœê·¼ 3ê°œ ì»¤ë°‹ ì·¨ì†Œ (ë³€ê²½ì‚¬í•­ unstaged)
git reset HEAD~3

# ìµœê·¼ 3ê°œ ì»¤ë°‹ ì™„ì „íˆ ì‚­ì œ
git reset --hard HEAD~3
```

### 2-2. íŠ¹ì • ì»¤ë°‹ìœ¼ë¡œ ë˜ëŒë¦¬ê¸°

**ëª…ë ¹ì–´:**
```bash
# ì»¤ë°‹ í•´ì‹œ í™•ì¸
git log --oneline

# íŠ¹ì • ì»¤ë°‹ìœ¼ë¡œ ë˜ëŒë¦¬ê¸° (ë³€ê²½ì‚¬í•­ ìœ ì§€)
git reset --soft <commit-hash>

# ì˜ˆì‹œ
git reset --soft dd16fd5
```

---

## ğŸ”„ ë°©ë²• 3: Revert ì‚¬ìš© (ì´ë¯¸ Pushí•œ ì»¤ë°‹ ì·¨ì†Œ)

### 3-1. ìƒˆë¡œìš´ ì»¤ë°‹ìœ¼ë¡œ ì´ì „ ì»¤ë°‹ ë˜ëŒë¦¬ê¸°

**ì–¸ì œ ì‚¬ìš©:**
- ì´ë¯¸ ì›ê²© ì €ì¥ì†Œì— pushí•œ ì»¤ë°‹ì„ ì·¨ì†Œí•˜ê³  ì‹¶ì„ ë•Œ
- íˆìŠ¤í† ë¦¬ë¥¼ ìœ ì§€í•˜ë©´ì„œ ì·¨ì†Œí•˜ê³  ì‹¶ì„ ë•Œ

**ëª…ë ¹ì–´:**
```bash
# ìµœê·¼ ì»¤ë°‹ ë˜ëŒë¦¬ê¸°
git revert HEAD

# íŠ¹ì • ì»¤ë°‹ ë˜ëŒë¦¬ê¸°
git revert <commit-hash>

# ì—¬ëŸ¬ ì»¤ë°‹ ë˜ëŒë¦¬ê¸°
git revert HEAD~2..HEAD
```

**ê²°ê³¼:**
- ìƒˆë¡œìš´ ì»¤ë°‹ì´ ìƒì„±ë˜ì–´ ì´ì „ ì»¤ë°‹ì˜ ë³€ê²½ì‚¬í•­ì„ ë˜ëŒë¦¼
- íˆìŠ¤í† ë¦¬ëŠ” ìœ ì§€ë¨
- ì•ˆì „í•˜ê²Œ ì›ê²©ì— push ê°€ëŠ¥

**ì˜ˆì‹œ:**
```bash
# ìµœê·¼ ì»¤ë°‹ ë˜ëŒë¦¬ê¸°
git revert HEAD

# ì»¤ë°‹ ë©”ì‹œì§€ í¸ì§‘ê¸° ì—´ë¦¼
# "Revert 'test ì‹œë‚˜ë¦¬ì˜¤'" ê°™ì€ ë©”ì‹œì§€ ìë™ ìƒì„±

# ê²°ê³¼ í™•ì¸
git log --oneline -3
# ìƒˆë¡œìš´ revert ì»¤ë°‹ì´ ìƒì„±ë¨
```

---

## ğŸ“‹ ìƒí™©ë³„ ì„ íƒ ê°€ì´ë“œ

| ìƒí™© | ì¶”ì²œ ë°©ë²• | ëª…ë ¹ì–´ |
|------|----------|--------|
| ì»¤ë°‹ ë©”ì‹œì§€ë§Œ ìˆ˜ì •í•˜ê³  ì‹¶ìŒ | `reset --soft` | `git reset --soft HEAD~1` |
| ë³€ê²½ì‚¬í•­ ë‹¤ì‹œ ê²€í†  í›„ ì»¤ë°‹ | `reset` (ê¸°ë³¸) | `git reset HEAD~1` |
| ì»¤ë°‹ê³¼ ë³€ê²½ì‚¬í•­ ì™„ì „íˆ ì‚­ì œ | `reset --hard` | `git reset --hard HEAD~1` |
| ì´ë¯¸ pushí•œ ì»¤ë°‹ ì·¨ì†Œ | `revert` | `git revert HEAD` |
| ì—¬ëŸ¬ ì»¤ë°‹ ì·¨ì†Œ | `reset HEAD~N` | `git reset HEAD~3` |

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. Reset --hardëŠ” ìœ„í—˜í•©ë‹ˆë‹¤!

```bash
# âŒ ì£¼ì˜: ë³µêµ¬ ë¶ˆê°€ëŠ¥í•  ìˆ˜ ìˆìŒ
git reset --hard HEAD~1

# âœ… ì•ˆì „í•œ ë°©ë²•: ë¨¼ì € ë°±ì—…
git branch backup-branch  # ë°±ì—… ë¸Œëœì¹˜ ìƒì„±
git reset --hard HEAD~1   # ê·¸ ë‹¤ìŒ reset
```

### 2. ì´ë¯¸ Pushí•œ ì»¤ë°‹ì€ Revert ì‚¬ìš©

```bash
# âŒ ì´ë¯¸ pushí•œ ì»¤ë°‹ì— reset --hard ì‚¬ìš©í•˜ë©´
git reset --hard HEAD~1
git push origin main
# ë‹¤ë¥¸ ê°œë°œìë“¤ì—ê²Œ ë¬¸ì œ ë°œìƒ!

# âœ… ì´ë¯¸ pushí•œ ì»¤ë°‹ì€ revert ì‚¬ìš©
git revert HEAD
git push origin main
```

### 3. Reset í›„ ê°•ì œ PushëŠ” ìœ„í—˜í•©ë‹ˆë‹¤

```bash
# âš ï¸ íŒ€ ì‘ì—… ì‹œ ì£¼ì˜!
git reset --hard HEAD~1
git push --force origin main  # ë‹¤ë¥¸ ì‚¬ëŒ ì‘ì—…ì— ì˜í–¥ ì¤„ ìˆ˜ ìˆìŒ
```

---

## ğŸ” ì‹¤ì „ ì˜ˆì œ

### ì˜ˆì œ 1: ì»¤ë°‹ ë©”ì‹œì§€ ìˆ˜ì •

```bash
# 1. ìµœê·¼ ì»¤ë°‹ ì·¨ì†Œ (ë³€ê²½ì‚¬í•­ ìœ ì§€)
git reset --soft HEAD~1

# 2. ìƒˆë¡œìš´ ë©”ì‹œì§€ë¡œ ë‹¤ì‹œ ì»¤ë°‹
git commit -m "ì˜¬ë°”ë¥¸ ì»¤ë°‹ ë©”ì‹œì§€"
```

### ì˜ˆì œ 2: ë§ˆì§€ë§‰ ì»¤ë°‹ì— ë³€ê²½ì‚¬í•­ ì¶”ê°€

```bash
# 1. ë³€ê²½ì‚¬í•­ ì¶”ê°€
echo "ì¶”ê°€ ë‚´ìš©" >> README.md

# 2. ì´ì „ ì»¤ë°‹ì— í¬í•¨ì‹œí‚¤ê¸°
git add README.md
git commit --amend

# ë˜ëŠ” ì»¤ë°‹ ë©”ì‹œì§€ë„ ìˆ˜ì •
git commit --amend -m "ìˆ˜ì •ëœ ë©”ì‹œì§€"
```

### ì˜ˆì œ 3: ì´ë¯¸ Pushí•œ ì»¤ë°‹ ì·¨ì†Œ

```bash
# 1. Revertë¡œ ì•ˆì „í•˜ê²Œ ì·¨ì†Œ
git revert HEAD

# 2. ì›ê²©ì— push
git push origin main
```

### ì˜ˆì œ 4: ì‹¤ìˆ˜ë¡œ ì»¤ë°‹í•œ íŒŒì¼ ì œê±°

```bash
# 1. ì»¤ë°‹ì€ ìœ ì§€í•˜ê³  íŠ¹ì • íŒŒì¼ë§Œ ì œê±°
git reset HEAD~1  # ì»¤ë°‹ ì·¨ì†Œ, ë³€ê²½ì‚¬í•­ ìœ ì§€

# 2. ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ë§Œ unstagedë¡œ
git reset HEAD unwanted-file.txt

# 3. ë‚˜ë¨¸ì§€ë§Œ ë‹¤ì‹œ ì»¤ë°‹
git add .
git commit -m "í•„ìš”í•œ íŒŒì¼ë§Œ ì»¤ë°‹"
```

---

## ğŸ†˜ ë³µêµ¬ ë°©ë²•

### ì‹¤ìˆ˜ë¡œ Reset --hard í–ˆì„ ë•Œ

```bash
# 1. Git reflogë¡œ ì´ì „ ìƒíƒœ ì°¾ê¸°
git reflog

# ì¶œë ¥ ì˜ˆì‹œ:
# abc1234 HEAD@{0}: reset: moving to HEAD~1
# def5678 HEAD@{1}: commit: test ì‹œë‚˜ë¦¬ì˜¤  <- ì´ì „ ì»¤ë°‹

# 2. ì´ì „ ì»¤ë°‹ìœ¼ë¡œ ë³µêµ¬
git reset --hard def5678

# ë˜ëŠ”
git reset --hard HEAD@{1}
```

### ì»¤ë°‹ì„ ì™„ì „íˆ ìƒì–´ë²„ë ¸ì„ ë•Œ

```bash
# 1. ëª¨ë“  ì°¸ì¡° í™•ì¸
git fsck --lost-found

# 2. dangling commit ì°¾ê¸°
git log --all --full-history -- <file-path>

# 3. ë³µêµ¬
git checkout <commit-hash>
git branch recovery-branch
```

---

## ğŸ“ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ (FAQ)

### Q1: `git reset --soft`ì™€ `git reset`ì˜ ì°¨ì´ëŠ”?

**A:** 
- `--soft`: ë³€ê²½ì‚¬í•­ì´ **staged** ìƒíƒœ (git add ëœ ìƒíƒœ)
- ê¸°ë³¸ (--mixed): ë³€ê²½ì‚¬í•­ì´ **unstaged** ìƒíƒœ (git add ì•ˆ ëœ ìƒíƒœ)

### Q2: `git reset`ê³¼ `git revert`ì˜ ì°¨ì´ëŠ”?

**A:**
- `reset`: ì»¤ë°‹ì„ **ì‚­ì œ**í•¨ (íˆìŠ¤í† ë¦¬ ë³€ê²½)
- `revert`: ìƒˆë¡œìš´ ì»¤ë°‹ìœ¼ë¡œ **ë˜ëŒë¦¼** (íˆìŠ¤í† ë¦¬ ìœ ì§€)

### Q3: ì´ë¯¸ pushí•œ ì»¤ë°‹ì„ reset í–ˆëŠ”ë° ì–´ë–»ê²Œ í•˜ë‚˜ìš”?

**A:**
```bash
# ë°©ë²• 1: ê°•ì œ push (íŒ€ ì‘ì—… ì‹œ ì£¼ì˜!)
git push --force origin main

# ë°©ë²• 2: revertë¡œ ì•ˆì „í•˜ê²Œ ë˜ëŒë¦¬ê¸° (ê¶Œì¥)
git revert HEAD
git push origin main
```

### Q4: ì»¤ë°‹ ë©”ì‹œì§€ë§Œ ìˆ˜ì •í•˜ê³  ì‹¶ì–´ìš”.

**A:**
```bash
git commit --amend -m "ìƒˆë¡œìš´ ë©”ì‹œì§€"
```

### Q5: ë§ˆì§€ë§‰ ì»¤ë°‹ì— íŒŒì¼ì„ ì¶”ê°€í•˜ê³  ì‹¶ì–´ìš”.

**A:**
```bash
git add new-file.txt
git commit --amend --no-edit  # ë©”ì‹œì§€ëŠ” ê·¸ëŒ€ë¡œ
```

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

Commit ì·¨ì†Œ ì „ì— í™•ì¸:

- [ ] ì»¤ë°‹ì„ ì´ë¯¸ push í–ˆë‚˜ìš”? â†’ `revert` ì‚¬ìš©
- [ ] ë³€ê²½ì‚¬í•­ì„ ìœ ì§€í•˜ê³  ì‹¶ë‚˜ìš”? â†’ `reset --soft` ë˜ëŠ” `reset`
- [ ] ë³€ê²½ì‚¬í•­ë„ ì™„ì „íˆ ì‚­ì œí•˜ê³  ì‹¶ë‚˜ìš”? â†’ `reset --hard` (ì£¼ì˜!)
- [ ] íŒ€ ì‘ì—… ì¤‘ì¸ê°€ìš”? â†’ `revert` ì‚¬ìš© ê¶Œì¥
- [ ] ë°±ì—… ë¸Œëœì¹˜ë¥¼ ë§Œë“¤ì—ˆë‚˜ìš”? â†’ `git branch backup` (ì•ˆì „ì¥ì¹˜)

---

## ğŸ¯ ë¹ ë¥¸ ì°¸ì¡°

```bash
# ì»¤ë°‹ ë©”ì‹œì§€ ìˆ˜ì •
git commit --amend -m "ìƒˆ ë©”ì‹œì§€"

# ì»¤ë°‹ ì·¨ì†Œ (ë³€ê²½ì‚¬í•­ ìœ ì§€, staged)
git reset --soft HEAD~1

# ì»¤ë°‹ ì·¨ì†Œ (ë³€ê²½ì‚¬í•­ ìœ ì§€, unstaged)
git reset HEAD~1

# ì»¤ë°‹ ì·¨ì†Œ (ë³€ê²½ì‚¬í•­ ì‚­ì œ)
git reset --hard HEAD~1

# ì´ë¯¸ pushí•œ ì»¤ë°‹ ì·¨ì†Œ
git revert HEAD

# Nê°œ ì»¤ë°‹ ì·¨ì†Œ
git reset --soft HEAD~N
```
